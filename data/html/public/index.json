
[{"content":"Notes on how i install a debian server with rootless docker and network-manager with an zsh setup\nA perfect debian 12 install with docker and zsh! # Prerequisites # we first need to get the iso i\u0026rsquo;m gonna go with debian 12 bookworm and you can ofc install this on hardware but i\u0026rsquo;m gonna install it on a vm\nInstallation # vm # I will use a vm to setup the debian setup you can ofc install this on hardware if you want but for ease of install i will use a vm and the software i use to do that is QEMU/KVM.\nfirmware: UEFI cpu: 1 Socket, 6 Cores and 1 Thread. ram: 8192MiB gpu: virtio(2d) hdd: 100GB Debian Installer # I will walk you through the installer from domain to manually partitioning disks\nDomain # You now need to enter your hostname like debian-server or smth like that and for domain normally you can skip this but if you have setup pfsense or opnsense than you can enter the domain after the first dot so for me that would be home.arpa (the default).\nPartitioning # You need to choose guided remove swap cus we are gonna zram then remove root an readd it with xfs/btrfs if using an ssd if not you can use ext4 it will give an warning after continueing cus there is no swap but you can just ignore that by hitting no and then continue with the install.\nMirrors # You should choose the default (deb.debian.org) if you don\u0026rsquo;t know which to choose.\nDesktop Selection # Untick all but \u0026lsquo;Debian desktop environment\u0026rsquo;, \u0026lsquo;standard utils\u0026rsquo; and enable \u0026lsquo;SSH server\u0026rsquo;.\nFinnish! # It should now be installed.\nSetting up # Sudo # We now need to go to tty2 (ctrl + alt + f2) then login with root cus we need to add our user to the sudoers group and we do that with:\n/usr/sbin/usermod -aG sudo user then we exit root (ctrl + d) and login with our user and we should now be in the sudoers file!\nSSH # Now we need to setup an ssh connection we do that with first enabling the service:\nsudo systemctl enable --now ssh We need to check for what ip to connect too with ip a:\n1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host noprefixroute valid_lft forever preferred_lft forever 2: enp1s0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether 52:54:00:09:75:ef brd ff:ff:ff:ff:ff:ff inet 192.168.122.221/24 brd 192.168.122.255 scope global dynamic noprefixroute enp1s0 valid_lft 2798sec preferred_lft 2798sec inet6 fe80::5054:ff:fe09:75ef/64 scope link noprefixroute valid_lft forever preferred_lft forever And in 2. inet 192.168.122.221 is the ip we need to connect too.\nRefreshing Mirrors (and fixing kitty) # We now need to fix kitty cus if you may have noticed the ssh connection is acting up this is kitty to fix that we need to do this\nsudo apt update \u0026amp;\u0026amp; sudo apt upgrade -y \u0026amp;\u0026amp; sudo apt install kitty -y sudo apt remove gdm -y And then reconnect with the ssh session.\nInstalling Required Packages # We will now install all the required packages for this server install:\nsudo apt install cargo fuse-overlayfs slirp4netns neovim git curl zsh neofetch dust make cmake rustc btop uidmap dbus-user-session -y For Mcfly:\ncurl -LSfs https://raw.githubusercontent.com/cantino/mcfly/master/ci/install.sh | sudo sh -s -- --git cantino/mcfly For eza:\nsudo mkdir -p /etc/apt/keyrings wget -qO- https://raw.githubusercontent.com/eza-community/eza/main/deb.asc | sudo gpg --dearmor -o /etc/apt/keyrings/gierens.gpg echo \u0026#34;deb [signed-by=/etc/apt/keyrings/gierens.gpg] http://deb.gierens.de stable main\u0026#34; | sudo tee /etc/apt/sources.list.d/gierens.list sudo chmod 644 /etc/apt/keyrings/gierens.gpg /etc/apt/sources.list.d/gierens.list sudo apt update \u0026amp;\u0026amp; sudo apt install -y eza And for dust:\ncurl -LSfs \u0026#34;https://objects.githubusercontent.com/github-production-release-asset-2e65be/125563061/dbaf86ba-0a32-4f0d-abca-61197ec0ce0d?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026amp;X-Amz-Credential=AKIAVCODYLSA53PQK4ZA%2F20240402%2Fus-east-1%2Fs3%2Faws4_request\u0026amp;X-Amz-Date=20240402T133137Z\u0026amp;X-Amz-Expires=300\u0026amp;X-Amz-Signature=d68092527396ef57f3c4c0634616386a1a59e2f7a50b850e64202bbb14f1d471\u0026amp;X-Amz-SignedHeaders=host\u0026amp;actor_id=46651680\u0026amp;key_id=0\u0026amp;repo_id=125563061\u0026amp;response-content-disposition=attachment%3B%20filename%3Ddu-dust_1.0.0-1_amd64.deb\u0026amp;response-content-type=application%2Foctet-stream\u0026#34; -o dust.deb sudo dpkg -i dust.deb \u0026amp;\u0026amp; rm dust.deb Setting up zsh (will be done later) # Setting up docker with a website! # We are now gonna setup docker with a website\nDocker Install # We need to add some lines to /etc/sysctl.conf:\nsudo /bin/su -c \u0026#34;echo \u0026#39;net.ipv4.ip_unprivileged_port_start=0\u0026#39; \u0026gt;\u0026gt; /etc/sysctl.conf\u0026#34; sudo /bin/su -c \u0026#34;echo \u0026#39;kernel.unprivileged_userns_clone=1\u0026#39; \u0026gt;\u0026gt; /etc/sysctl.conf\u0026#34; sudo /bin/su -c \u0026#34;echo \u0026#39;vm.max_map_count=262144\u0026#39; \u0026gt;\u0026gt; /etc/sysctl.conf\u0026#34; sudo sysctl --system It\u0026rsquo;s now time to install docker! we first need to add the docker keyrings and you can do that with this:\nsudo apt-get update sudo install -m 0755 -d /etc/apt/keyrings sudo curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc sudo chmod a+r /etc/apt/keyrings/docker.asc after that is done we need to add the repo to our sources:\necho \\ \u0026#34;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \\ $(. /etc/os-release \u0026amp;\u0026amp; echo \u0026#34;$VERSION_CODENAME\u0026#34;) stable\u0026#34; | \\ sudo tee /etc/apt/sources.list.d/docker.list \u0026gt; /dev/null sudo apt update we can now finally install docker with uptodate versions:\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin now that docker is installed we ofc need to test it first to check if it is installed correctly or not and you can do that with this:\nsudo docker run hello-world if it worked then docker is installed correctly!\nSetting up rootless for docker # now that we have docker installed we don\u0026rsquo;t want to run everything with root and want to run it securily with our user in rootless mode to do that we need to run this simple script from docker themselfs:\nsudo systemctl disable --now docker.service docker.socket dockerd-rootless-setuptool.sh install systemctl --user enable --now docker and again to check if it\u0026rsquo;s installed correctly we can run this command:\ndocker run hello-world Setting up nginx # Now that docker is installed and working we now need to add some folder for them where to place the containers and such and to do that we just need to add these:\nmkdir ~/docker \u0026amp;\u0026amp; cd ~/docker For setting up a site with nginx just clone my git repo for a docker container with nginx:\ngit clone https://git.kaleyfischer.xyz/DRAGONTOS/nginx-docker \u0026amp;\u0026amp; cd nginx-docker Now that we are in the nginx-docker container we need to build the container\n","date":"2 April 2024","externalUrl":null,"permalink":"/servers/1712013557202-hyprland/","section":"Servers","summary":"Notes on how i install a debian server with rootless docker and network-manager with an zsh setup","title":"A perfect debian 12 install with docker and zsh!","type":"servers"},{"content":"","date":"2 April 2024","externalUrl":null,"permalink":"/tags/example/","section":"Tags","summary":"","title":"example","type":"tags"},{"content":"","date":"2 April 2024","externalUrl":null,"permalink":"/tags/hyprland/","section":"Tags","summary":"","title":"hyprland","type":"tags"},{"content":"","date":"2 April 2024","externalUrl":null,"permalink":"/","section":"Kaley Fischer","summary":"","title":"Kaley Fischer","type":"page"},{"content":"an example to get you started\nThis is a heading # This is a subheading # This is a subsubheading # This is a subsubsubheading # This is a paragraph with bold and italic text. Check more at Blowfish documentation undefined\n","date":"2 April 2024","externalUrl":null,"permalink":"/servers/1712061930956-owo/","section":"Servers","summary":"an example to get you started","title":"owo","type":"servers"},{"content":"","date":"2 April 2024","externalUrl":null,"permalink":"/servers/","section":"Servers","summary":"","title":"Servers","type":"servers"},{"content":"","date":"2 April 2024","externalUrl":null,"permalink":"/tags/tag/","section":"Tags","summary":"","title":"tag","type":"tags"},{"content":"","date":"2 April 2024","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"2 April 2024","externalUrl":null,"permalink":"/tags/workflow/","section":"Tags","summary":"","title":"workflow","type":"tags"},{"content":"Hey! I\u0026rsquo;m Kaley! I sometimes go by DRAGONTOS or dragon, and I just turned 19! I have been using Linux for 3.2 years now and I have since 2 years ago joined the community. I try to help people with problems and make cool project\u0026rsquo;s on github/ forgejo! I also have my own hyprland fork!\n🤓 Expertise Servers \u0026amp; Administration: Operating Systems: Ubuntu \u0026amp; Debian. Container Management Docker. Firewall: pfsense, Ipfire \u0026amp; OPNsense. Scripting: Bash, Systemd. Web \u0026amp; Software Development: Operating Systems: Linux, Fedora, Debian and Arch. Languages: C++, Lua. Frameworks: Hugo. Frontend: HTML, CSS. Text Editing: Neovim. 📒 Current Projects Hyprland Fork: I have my own Hyprland fork that I made some changes in, it mainly just is a stable build of Hyprland that you can easily install. 🗄️ Git Repositories Below you can find somethings I have worked on in the past and still am working on:\nTitle Description Link RapidMenu Utilize configuration files to create runner scripts. repo minecraft-docker A docker container for running a minecraft server! repo dwm A dwm fork with all my favorite patches. repo Extramentals Alt to Essentials! repo tr.blood A blood particle plugin for minecraft. repo ","date":"27 November 2023","externalUrl":null,"permalink":"/about/","section":"Kaley Fischer","summary":"Hey! I\u0026rsquo;m Kaley!","title":"About","type":"page"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"}]